---
export interface Props {
  character: string;
  species: string;
  affiliation: string;
  era: string;
  tags: string[];
  ship?: string;
  homeworld?: string;
  lastUpdated: Date;
}

const { character, species, affiliation, era, tags, ship, homeworld, lastUpdated } = Astro.props;

const formattedDate = lastUpdated.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<div class="story-meta bg-ic-panel border border-ic-line rounded-lg p-6 my-8">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    {/* Left Column */}
    <div class="space-y-3">
      <div>
        <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Character</span>
        <p class="text-sm text-white mt-1">{character}</p>
      </div>

      <div>
        <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Species</span>
        <p class="text-sm text-white mt-1">{species}</p>
      </div>

      <div>
        <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Affiliation</span>
        <p class="text-sm text-white mt-1">{affiliation}</p>
      </div>

      <div>
        <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Era</span>
        <p class="text-sm text-white mt-1">{era}</p>
      </div>
    </div>

    {/* Right Column */}
    <div class="space-y-3">
      {ship && (
        <div>
          <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Ship</span>
          <p class="text-sm text-white mt-1">{ship}</p>
        </div>
      )}

      {homeworld && (
        <div>
          <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Homeworld</span>
          <p class="text-sm text-white mt-1">{homeworld}</p>
        </div>
      )}

      <div>
        <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Last Updated</span>
        <p class="text-sm text-white mt-1 font-mono">{formattedDate}</p>
      </div>

      {tags.length > 0 && (
        <div>
          <span class="text-xs font-label uppercase tracking-wider text-ic-mute">Tags</span>
          <div class="flex flex-wrap gap-2 mt-2">
            {tags.map(tag => (
              <span class="text-xs bg-ic-line px-2 py-1 rounded text-ic-mute hover:text-white transition-colors">
                #{tag}
              </span>
            ))}
          </div>
        </div>
      )}
    </div>
  </div>
</div>

<style>
  .story-meta {
    position: relative;
  }

  .story-meta::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      rgba(217, 58, 58, 0.3),
      transparent
    );
  }
</style>
